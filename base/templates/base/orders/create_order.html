{% extends 'main.html' %}
{% load static %}


{% block content %}
    <div class="page-wrapper">
			<div class="content container-fluid">
				<div class="page-header">
					<div class="row align-items-center">
						<div class="col">
							<h3 class="page-title mt-5">Create Order </h3> </div>
					</div>
				</div>
				<div class="row">
					<div class="col-lg-12">
						<form method="POST">
                            {% csrf_token %}
                            {{ form.as_p }}
                            <button type="submit">Submit</button>
                        </form>

					</div>
				</div>
				<button type="submit" class="btn btn-primary buttonedit1">submit</button>
			</div>
		</div>
<script>
document.addEventListener("DOMContentLoaded", function() {
    const productSelect = document.querySelector("select[name='product']");
    const priceInput = document.querySelector("input[name='price']");

    productSelect.addEventListener("change", function() {
        const productId = productSelect.value;

        // Send AJAX request to fetch the product price
        fetch(`/get-product-price/${productId}/`)
            .then(response => response.json())
            .then(data => {
                if (data.price) {
                    // Set the price field with the fetched price
                    priceInput.value = data.price;
                }
            })
            .catch(error => console.log('Error fetching product price:', error));
    });
});
</script>


{% endblock %}